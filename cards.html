<!-- Récupérer la carte sélectionnée depuis l'URL, sinon utiliser la première du dropdown -->

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>WireBattle – Cards</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<style>
    
/* Ton CSS existant */
body { background-color: #f8f9fa; font-family: 'Courier New', monospace; }
.card-image { width: 100%; max-width: 400px; min-height: 250px; background-size: contain; background-position: center; background-repeat: no-repeat; border-radius: 20px 20px 0 0; margin-bottom: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); transition: transform 0.2s ease; }
.card-image:hover { transform: scale(1.03); }
.card { width: 100%; max-width: 600px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); padding: 1rem; background-color: #ffffff; margin: auto; transition: all 0.2s ease; }
.card-title { font-size: 1.4rem; font-weight: 600; color: #4b2e5a; }
.card-text { font-size: 1rem; line-height: 1.5; color: #333333; white-space: pre-line; }
.fade-in { opacity: 0; transform: translateY(10px); animation: fadeInUp 0.4s forwards; }
@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
#nav-buttons { margin-top: 15px; display: flex; justify-content: center; gap: 15px; }
#nav-buttons button { padding: 8px 16px; border-radius: 8px; border: none; background-color: #9b5ca6; color: #fff; font-weight: 600; transition: transform 0.2s ease, background-color 0.2s ease; }
#nav-buttons button:hover { transform: scale(1.05); background-color: #c688bb; cursor: pointer; }

</style>
</head>
<body>
    white-space: pre-line;

<!-- Navbar existante -->
<nav class="navbar sticky-top border-bottom" style="background-color:#c688bb;">
    <div class="container">
        <!-- MOBILE -->
        <div class="d-flex d-md-none justify-content-between align-items-center w-100">
            <a class="navbar-brand" href="index.html">
                <img src="image/logow.svg" alt="WireBattle Logo" style="height:50px; width:auto;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" aria-controls="offcanvas">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <!-- OFFCANVAS -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas" style="max-width:50%; background-color:#c688bb;">
            <div class="offcanvas-body d-flex flex-column align-items-center pt-5">
                <ul class="navbar-nav w-100 text-center" style="gap: 20px;">
                    <li class="nav-item"><a class="nav-link" href="rule.html" style="font-size:130%; color:#eace3b;">Rules</a></li>
                    <li class="nav-item"><a class="nav-link" href="cards.html" style="font-size:130%; color:#eace3b;">Cards</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html" style="font-size:130%; color:#eace3b;">Home</a></li>
                </ul>
            </div>
        </div>
        <!-- DESKTOP -->
        <div class="d-none d-md-flex justify-content-between align-items-center w-100 py-2 px-5">
            <a class="nav-link" href="rule.html" style="font-size:130%; color:#eace3b;">Rules</a>
            <a class="navbar-brand mx-3" href="index.html"><img src="image/logow.svg" alt="WireBattle Logo" style="height:60px;"></a>
            <a class="nav-link" href="cards.html" style="font-size:130%; color:#eace3b;">Cards</a>
        </div>
    </div>
</nav>

<div class="container py-4 text-center">
    <h2 class="mb-3">WireBattle – Cards</h2>

    <!-- Dropdown -->
    <select id="cardSelect" class="form-select mb-4" style="max-width:300px; margin:auto;">
        <option value="Quick_sketch">Quick sketch</option>
        <option value="Page_breakdown">Page breakdown</option>
        <option value="Block_placement">Block placement</option>
        <option value="Adding_columns">Adding columns</option>
        <option value="Adding_buttons">Adding buttons and links</option>
        <option value="Adding_placeholder_images">Adding placeholder images</option>
        <option value="Simple_text">Simple text and headings</option>
        <option value="Information_organization">Information organization</option>
        <option value="Mobile_version">Mobile version</option>
        <option value="Clean_alignments">Clean alignments and spacing</option>
        <option value="Click_path">Click path</option>
        <option value="Realistic_mockup">Realistic mockup</option>
        <option value="Simple_prototype">Simple prototype</option>
        <option value="Power_up1">Power-up 1</option>
        <option value="Power_up2">Power-up 2</option>
        <option value="Power_up3">Power-up 3</option>
        <option value="Power_up4">Power-up 4</option>
        <option value="Joker">Joker</option>
    </select>

    <!-- Card -->
    <div id="cardImage" class="card-image mx-auto" style="background-image:url('image/cards/carte_test.png');"></div>
    <div class="card shadow p-3 mx-auto">
        <h4 class="card-title">Description</h4>
        <p class="card-text">Select a card from the dropdown above or use the arrows below.</p>
    </div>

    <div id="nav-buttons">
        <button id="prevBtn">Previous</button>
        <button id="nextBtn">Next</button>
    </div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const selectedCard = params.get('card') || 'Quick_sketch';

const cardImage = document.getElementById("cardImage");
const zoneTexte = document.querySelector(".card-text");
const cardSelect = document.getElementById("cardSelect");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const cardOptions = Array.from(cardSelect.options);

let currentIndex = cardOptions.findIndex(opt => opt.value === selectedCard);
if (currentIndex === -1) currentIndex = 0;

let cardsData = {};

fetch("cards.json")
    .then(resp => resp.json())
    .then(json => {
        cardsData = json;
        loadCard(currentIndex);
    });

function loadCard(index) {
    const key = cardOptions[index].value;
    cardSelect.selectedIndex = index;

    const data = cardsData[key];

    if (!data) return;

    zoneTexte.classList.remove("fade-in");
    cardImage.classList.remove("fade-in");
    void zoneTexte.offsetWidth;
    void cardImage.offsetWidth;

    zoneTexte.textContent = data.texte;
    cardImage.style.backgroundImage = `url('${data.image}')`;

    zoneTexte.classList.add("fade-in");
    cardImage.classList.add("fade-in");
}

cardSelect.addEventListener("change", () => {
    currentIndex = cardSelect.selectedIndex;
    loadCard(currentIndex);
});

prevBtn.addEventListener("click", () => {
    currentIndex = (currentIndex - 1 + cardOptions.length) % cardOptions.length;
    loadCard(currentIndex);
});

nextBtn.addEventListener("click", () => {
    currentIndex = (currentIndex + 1) % cardOptions.length;
    loadCard(currentIndex);
});
</script>

</body>
</html>
